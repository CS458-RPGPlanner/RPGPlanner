<!DOCTYPE html>
<html>

<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">


	<!-- Insert this line above script imports  -->
	<script>if (typeof module === 'object') { window.module = module; module = undefined; }
	</script>
	<!--Accordian Links-->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
		integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js">
	</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js">
	</script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js">
	</script>
	<!--Connection to CSS styleSheet-->
	<link rel="stylesheet" href="css\styles.css">
	<!--Connection to JSON javascript-->
	<script src="js\JSON.js"></script>
	<script>
		// load the student when the page loads
		window.addEventListener("load", function () {
			displayAssignments();
		});
	</script>
	<!-- Insert this line after script imports -->
	<script>if (window.module) module = window.module;</script>
</head>

<body class="body">

	<!--Nav Tabs-->
	<div id="mySidenav" class="sidenav">
		<a href="#" id="RPG">RPG</a>
		<a href="#" id="profile">PROFILE</a>

	</div>

	<div class="grid-container">
		<div class="box item5">
			<!--Tester Tabs-->
			<button onclick="tabClicked()" class="tabButtons" id="allTag">All</button>
			<button onclick="tabClicked()" class="tabButtons">Tag1</button>
		</div>

		<div class="box item1">
			<div id="accordion">
				<div class="card">
					<div id="assnHeader-001" class="card-header">
						<button onclick="toggleButton(this.id)" id="assnBtn_001" class="defaultBtn"
							data-toggle="collapse" href="#description1">
							<p class="assignment-name">Test Assignment Functionality</p>
							<div class="due-tasks">
								Due Date: Oct 31&emsp;Tasks: 0/3
							</div>
						</button>
						<div class="check">
							<p class="assignment-points">10 points</p>
							<input type="checkbox" class="checkBox">
						</div>
					</div>
					<div id="description1" class="collapse" data-parent="#accordion">
						<div id="taskHeader-001" class="card-header">
							<button onclick="toggleButton(this.id);" id="taskBtn_001" class="defaultBtn task">
								<p class="assignment-name">Task 1</p>
								<div class="due-tasks">
									Due Date: Oct 31&emsp;
								</div>
							</button>
							<div class="check">
								<p class="assignment-points">10 points</p>
								<input type="checkbox" class="checkBox">
							</div>
						</div>
						<div class="card-header">
							<button onclick="toggleButton(this.id);" id="taskBtn_002" class="defaultBtn task">
								<p class="assignment-name">Task 2</p>
								<div class="due-tasks">
									Due Date: Nov 1&emsp;
								</div>
							</button>
							<div class="check">
								<p class="assignment-points">10 points</p>
								<input type="checkbox" class="checkBox">
							</div>
						</div>
						<div class="card-header">
							<button onclick="toggleButton(this.id);" id="taskBtn_003" class="defaultBtn task">
								<p class="assignment-name">Task 3</p>
								<div class="due-tasks">
									Due Date: Nov 3&emsp;
								</div>
							</button>
							<div class="check">
								<p class="assignment-points">10 points</p>
								<input type="checkbox" class="checkBox">
							</div>
						</div>
					</div>
				</div>
			</div>

		</div>
		<div class="box item2">Undated Assignment</div>
		<div class="box item3">Due Today</div>
		<div class="box item4">
			<!--createAssignment button form-->
			<div id="assignmentDiv">
				<button id="createAssnBtn" class="createAssn" onclick="openForm()">Create Assignment</button>
			</div>

			<div class="form-popup" id="myForm">
				<form action="/action_page.php" class="form-container">
					<h1>Create Assignment</h1>

					<label for="name"><b>Name</b></label>
					<input type="text" placeholder="Enter Name" name="name" maxlength="50" required>

					<label for="description"><b>Description</b></label>
					<input type="text" placeholder="Enter Description" name="description" maxlength="450" required>

					<label for="date"><b>Date</b></label>
					<input type="date" placeholder="Enter Date" name="date" required>

					<label for="points"><b>Points</b></label>
					<input type="number" placeholder="Enter Points" name="points" required>

					<button type="button" class="btn" onclick="saveAssignment()">Save</button>
					<button type="button" class="btn cancel" onclick="closeForm()">Cancel</button>
				</form>
			</div>

			<!--Assignment details popup-->
			<div class="detailsPopup" id="details">
				<!--<div>

					<div class="details-assignment-name" style="justify-content:flex-end;">
						<button class="close-button" id="editBtn">Edit</button>
						<button class="close-button" id="closeBtn" onclick="closeDetail();">&times;</button>
					</div>
					<div class="details-title">Title</div>
					<div>
						<div class="details-due-date">
							Due Date: September 30&emsp;Tasks: 0/3
						</div>

						<input type="checkbox" class="detailsCheckBox" id="detailsPointsBox"></input>
						<p class="detailsCheckBox" id="detailsPoints">Assignment Points</p>
						<p class="details-desc">Cool Description</p>
						<div style="height:150px;overflow:auto;">
							<div>
								<div class="card-header">
									<button onclick="toggleButton(this.id);" class="defaultBtn task">
										Task 1
									</button>
								</div>
								<div class="card-header">
									<button onclick="toggleButton(this.id);" class="defaultBtn task">
										Task 2
									</button>
								</div>
								<div class="card-header">
									<button onclick="toggleButton(this.id);" class="defaultBtn task">
										Task 3
									</button>
								</div>
							</div>
						</div>
					</div>
				</div>-->
			</div>
		</div>
	</div>
	</div>
	</div>
	</div>
	<script>
		function toggleButton(clickedID) {
			/*Add a get element for the back button or a double click from assn/task*/
			/*Get CreateBtn info*/
			//div that holds both create assignment and details div
			let assnId = clickedID.substring(14);

			let dDiv = document.getElementById("details");

			if (document.getElementById("assignmentDiv")) {
				let assignmentDiv = document.getElementById("assignmentDiv");
				console.log(assignmentDiv);
				assignmentDiv.remove();
				displayDetails(assnId);
			}
			else {
				//remove the containerDiv
				let containerDiv = document.getElementById("containerDiv");
				console.log(containerDiv);
				containerDiv.remove();

				//creating div for create assignment 
				let createDiv = document.createElement("div");
				createDiv.setAttribute("id", "assignmentDiv");


				let createBtn = document.createElement("button")
				createBtn.setAttribute("id", "createAssnBtn");
				createBtn.setAttribute("class", "createAssn");
				createBtn.setAttribute("onclick", "openForm()");
				createBtn.innerHTML = "Create Assignment";

				dDiv.append(createDiv);
				createDiv.append(createBtn);

			}
		}


		function closeDetail() {
			let dDiv = document.getElementById("details");
			//remove the containerDiv
			let containerDiv = document.getElementById("containerDiv");
			console.log(containerDiv);
			containerDiv.remove();

			//creating div for create assignment 
			let createDiv = document.createElement("div");
			createDiv.setAttribute("id", "assignmentDiv")

			let createBtn = document.createElement("button")
			createBtn.setAttribute("id", "createAssnBtn");
			createBtn.setAttribute("class", "createAssn");
			createBtn.setAttribute("onclick", "openForm()");
			createBtn.innerHTML = "Create Assignment";

			dDiv.append(createDiv);
			createDiv.append(createBtn);

			//darkenCard(clickedID);
		}
		//Makes card-header of clicked assn/task look selected
		//TODO: Hover seems to go away when setting the BG
		function darkenCard(clickedID) {
			let cardBG = "lightgrey"; //change if need be
			let whiteBG = "white";
			let sameBtn = false;
			let card = document.getElementById(clickedID).parentNode;

			//Unhighlight all other buttons
			let assnTaskList = document.querySelectorAll('*[class^="card-header"]');
			if (assnTaskList != null) {
				for (let i = 0; i < assnTaskList.length; i++) {
					if (assnTaskList[i].style.backgroundColor == cardBG) {
						assnTaskList[i].style.backgroundColor = whiteBG;
						if (card == assnTaskList[i]) {
							sameBtn = true;
						}
						i = assnTaskList.length;
					}
				}
			}

			//Darkns selected btn

			//console.log(sameBtn);
			if (sameBtn) {
				card.style.backgroundColor = whiteBG;
			}
			else {
				card.style.backgroundColor = cardBG;
			}
		}
	</script>

</body>

</html>